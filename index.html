<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>堆积便签墙</title>
    <style>
      * {
        box-sizing: border-box;
        margin: 0;
        padding: 0;
      }
      body {
        font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
        background-image: linear-gradient(0deg, #eee 1px, transparent 0),
          linear-gradient(90deg, #eee 1px, transparent 0);
        background-size: 30px 30px;
        min-height: 100vh;
        overflow: hidden;
      }
      #board {
        position: relative;
        width: 100vw;
        height: 100vh;
        overflow: hidden;
      }
      .card {
        position: absolute;
        width: 220px;
        border-radius: 12px;
        box-shadow: 0 16px 35px rgba(0, 0, 0, 0.2);
        background: #fff;
        border: 1px solid rgba(0, 0, 0, 0.08);
        overflow: hidden;
        opacity: 0;
        transform-origin: center;
        transition: transform 0.6s ease, left 0.8s ease, top 0.8s ease, opacity 0.8s ease;
      }
      .card-header {
        display: flex;
        align-items: center;
        justify-content: space-between;
        padding: 10px 12px;
        background: rgba(255, 255, 255, 0.7);
      }
      .card-title {
        font-size: 13px;
        font-weight: 600;
        color: rgba(0, 0, 0, 0.55);
        padding-left: 10px;
        flex: 1;
      }
      .card-body {
        padding: 16px;
        font-size: 16px;
        line-height: 1.4;
        font-weight: 600;
        color: rgba(0, 0, 0, 0.72);
      }
    </style>
  </head>
  <body>
    <div id="board"></div>

    <script>
      const board = document.getElementById("board");
      const messages = [
        "保持好心情",
        "多喝水哦",
        "今天辛苦啦",
        "早点休息",
        "记得吃水果",
        "加油，你可以的",
        "祝你顺利",
        "保持微笑呀",
        "愿所有烦恼都消失",
        "期待下一次见面",
        "梦想总会实现",
        "天气冷了，多穿衣服",
        "记得给自己放松",
        "每天都要元气满满",
        "今天也要好好爱自己",
        "适当休息一下"
      ];
      const colors = [
        "#ffe0e3",
        "#c7f0ff",
        "#ffd8a8",
        "#d9f2d9",
        "#e5d7ff",
        "#f9f7d9",
        "#d2f0f8",
        "#ffd4f5"
      ];

      let cards = [];
      const maxCards = 60;
      let stacking = true;

      function randomFrom(arr) {
        return arr[Math.floor(Math.random() * arr.length)];
      }

      function createCard() {
        const card = document.createElement("div");
        card.className = "card";
        card.style.background = randomFrom(colors);
        card.innerHTML = `
          <div class="card-header">
            <div class="card-title">温馨提示</div>
          </div>
          <div class="card-body">${randomFrom(messages)}</div>
        `;

        // 从四个方向之一飞入
        const side = randomFrom(["left", "right", "top", "bottom"]);
        let startX, startY;

        switch (side) {
          case "left":
            startX = -250;
            startY = Math.random() * window.innerHeight;
            break;
          case "right":
            startX = window.innerWidth + 250;
            startY = Math.random() * window.innerHeight;
            break;
          case "top":
            startX = Math.random() * window.innerWidth;
            startY = -200;
            break;
          case "bottom":
            startX = Math.random() * window.innerWidth;
            startY = window.innerHeight + 200;
            break;
        }

        const targetX =
          window.innerWidth * 0.3 +
          Math.random() * window.innerWidth * 0.4 -
          110; // 中心40%
        const targetY =
          window.innerHeight * 0.3 +
          Math.random() * window.innerHeight * 0.4 -
          90; // 中心40%

        const angle = (Math.random() - 0.5) * 20;
        card.style.left = `${startX}px`;
        card.style.top = `${startY}px`;
        card.style.transform = `rotate(${angle}deg) scale(0.6)`;
        card.style.opacity = 0;
        board.appendChild(card);
        cards.push(card);

        // 动画靠近中心
        setTimeout(() => {
          card.style.left = `${targetX}px`;
          card.style.top = `${targetY}px`;
          card.style.opacity = 1;
          card.style.transform = `rotate(${angle}deg) scale(1)`;
        }, 20 + Math.random() * 100);
      }

      function spawnCards() {
        if (!stacking) return;
        if (cards.length >= maxCards) return;
        createCard();
        setTimeout(spawnCards, 180 + Math.random() * 220);
      }

      function explodeCards() {
        stacking = false;
        cards.forEach((card) => {
          const angle = Math.random() * 2 * Math.PI;
          const distance = 400 + Math.random() * 400;
          const dx = Math.cos(angle) * distance;
          const dy = Math.sin(angle) * distance;
          const rot = (Math.random() - 0.5) * 120;
          card.style.transition =
            "transform 1s ease-out, left 1s ease-out, top 1s ease-out, opacity 1s ease";
          card.style.left = `${parseFloat(card.style.left) + dx}px`;
          card.style.top = `${parseFloat(card.style.top) + dy}px`;
          card.style.transform = `rotate(${rot}deg) scale(1.3)`;
          card.style.opacity = 0;
        });

        setTimeout(() => {
          cards.forEach((c) => c.remove());
          cards = [];
          stacking = true;
          spawnCards();
        }, 1100);
      }

      document.addEventListener("click", explodeCards);
      spawnCards();
    </script>
  </body>
</html>
