<!DOCTYPE html>
<html lang="zh-CN">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>便签promax</title>
<style>
  * { box-sizing: border-box; margin: 0; padding: 0; }
  body {
    overflow: hidden;
    height: 100vh;
    background: radial-gradient(circle at center, #f8f8f8, #dbe6f6);
    perspective: 1000px;
    font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif;
    cursor: none;
  }
  #board {
    position: relative;
    width: 100%;
    height: 100%;
    transform-style: preserve-3d;
  }
  .card {
    position: absolute;
    width: 220px;
    height: 60px;
    border-radius: 10px;
    box-shadow: 0 12px 30px rgba(0,0,0,0.25);
    background: #fff;
    text-align: center;
    padding: 16px;
    font-weight: 600;
    color: #333;
    opacity: 0;
    transform-origin: center;
    backface-visibility: hidden;
    border: 1px solid rgba(0,0,0,0.1);
    transition: opacity 1s ease;
  }
</style>
</head>
<body>
<div id="board"></div>

<script>
const board = document.getElementById("board");
const messages = [
  "保持好心情","多喝水哦","今天辛苦啦","早点休息","加油，你可以的",
  "祝你顺利","愿所有烦恼都消失","每天都要元气满满","好梦！","继续发光✨"
];
const colors = ["#ffdce0","#d2f5ff","#ffecb3","#d7f9d0","#e4ddff","#fff3cd"];

let cards = [];
const cardCount = 30;
let angleOffset = 0;
let running = true;
let speedFactor = 1;
let baseSpeed = 0.008;

// 龙卷风中心（实际中心点）
let centerX = window.innerWidth / 2;
let centerY = window.innerHeight / 2;

// 鼠标目标点（引力中心）
let targetX = centerX;
let targetY = centerY;

// 鼠标控制目标点移动
document.addEventListener("mousemove", e => {
  targetX = e.clientX;
  targetY = e.clientY;
});

// 鼠标按下时加速旋转
document.addEventListener("mousedown", () => {
  speedFactor = 3;
});

// 鼠标松开时爆炸再重组
document.addEventListener("mouseup", () => {
  speedFactor = 1;
  explode();
});

// 初始化卡片
function createCards() {
  for (let i = 0; i < cardCount; i++) {
    const c = document.createElement("div");
    c.className = "card";
    c.textContent = messages[Math.floor(Math.random() * messages.length)];
    c.style.background = colors[Math.floor(Math.random() * colors.length)];
    board.appendChild(c);

    cards.push({
      el: c,
      // 每个卡片独立的轨道半径与高度
      radius: 180 + Math.random() * 250,
      heightOffset: Math.random() * 300 - 150,
      speed: 0.5 + Math.random() * 0.8,
      tilt: (Math.random() - 0.5) * 40,
      flipSpeed: 0.02 + Math.random() * 0.02,
      flipAngle: Math.random() * Math.PI * 2,
      // 吸引参数：每个卡片有自己缓动速度
      attractStrength: 0.02 + Math.random() * 0.05,
      // 初始位置（分散）
      x: Math.random() * window.innerWidth,
      y: Math.random() * window.innerHeight,
      z: 0
    });

    // 延迟淡入
    setTimeout(() => (c.style.opacity = 1), 200 + Math.random() * 600);
  }
}

// 动画主循环
function animate() {
  if (!running) return;

  // 中心被目标点吸引（中心本身有惯性）
  centerX += (targetX - centerX) * 0.05;
  centerY += (targetY - centerY) * 0.05;

  // 旋转偏移
  angleOffset += baseSpeed * speedFactor;

  cards.forEach((c, i) => {
    const angle = angleOffset * c.speed + i * (Math.PI * 2 / cardCount);

    // 各卡片的目标位置：绕当前中心旋转
    const targetX = centerX + Math.cos(angle) * c.radius;
    const targetY = centerY + Math.sin(angle) * c.radius * 0.6 + c.heightOffset;
    const targetZ = Math.sin(angle * 2) * 150;

    // 每个卡片以自己的吸引力缓动前往目标点
    c.x += (targetX - c.x) * c.attractStrength;
    c.y += (targetY - c.y) * c.attractStrength;
    c.z += (targetZ - c.z) * c.attractStrength;

    // 翻转与倾斜动画
    c.flipAngle += c.flipSpeed;
    const rotateY = Math.sin(c.flipAngle) * c.tilt;
    const rotateX = Math.cos(c.flipAngle) * 10;

    c.el.style.transform = `
      translate3d(${c.x - 110}px, ${c.y - 60}px, ${c.z}px)
      rotateY(${rotateY}deg)
      rotateX(${rotateX}deg)
      scale(${1 + Math.sin(angle * 3) * 0.05})
    `;
  });

  requestAnimationFrame(animate);
}

// 爆炸效果
function explode() {
  running = false;
  cards.forEach((c) => {
    const angle = Math.random() * 2 * Math.PI;
    const dist = 800 + Math.random() * 400;
    const dx = Math.cos(angle) * dist;
    const dy = Math.sin(angle) * dist;
    const dz = (Math.random() - 0.5) * 600;
    c.el.style.transition = "transform 1.2s ease-out, opacity 1.2s ease";
    c.el.style.transform = `translate3d(${dx}px, ${dy}px, ${dz}px)
      rotateY(${Math.random() * 720}deg)
      rotateX(${Math.random() * 720}deg)
      scale(0.8)`;
    c.el.style.opacity = 0;
  });

  // 爆炸后重新生成
  setTimeout(() => {
    cards.forEach((c) => c.el.remove());
    cards = [];
    running = true;
    createCards();
    animate();
  }, 1300);
}

createCards();
animate();
</script>
</body>
</html>
